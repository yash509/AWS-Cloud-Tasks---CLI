Step 1: Know your VPC ID:-

aws ec2 describe-vpcs \
  --query "Vpcs[*].{VpcId:VpcId,Name:Tags[?Key=='Name']|[0].Value}" \
  --output table
  
  
  
Step 2: Create a Security Group Allowing HTTP Traffic:-

aws ec2 create-security-group \
  --group-name xfusion-sg \
  --description "Security group for xfusion-ec2 allowing HTTP traffic" \
  --vpc-id vpc-xxxxxxxxxxxxxxx \
  --region us-east-1

aws ec2 authorize-security-group-ingress \
  --group-id sg-xxxxxxxxxxxxxxx \
  --protocol tcp \
  --port 80 \
  --cidr 0.0.0.0/0 \
  --region us-east-1



Step 3: Create a Key Pair:-

aws ec2 create-key-pair \
  --key-name devops-kp \
  --key-type rsa \
  --query 'KeyMaterial' \
  --output text > devops-kp.pem



Step 4: Know your Subnets:-

aws ec2 describe-subnets \
  --query "Subnets[*].{SubnetId:SubnetId,SubnetName:Tags[?Key=='Name']|[0].Value,VpcId:VpcId,VpcName:(VpcId)}" \
  --output table



Step 5: Launch EC2 Instance with User Data Script:-

aws ec2 run-instances \
  --image-id ami-0030e4319cbf4dbf2 \   # Example Ubuntu AMI, replace with valid one
  --count 1 \
  --instance-type t2.micro \
  --key-name devops-kp \
  --security-group-ids sg-xxxxxxxxxxxxxxx \
  --subnet-id subnet-xxxxxxxxxxxxxxx \
  --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=xfusion-ec2}]' \
  --user-data '#!/bin/bash
apt-get update -y
apt-get install -y nginx
systemctl start nginx
systemctl enable nginx' \
  --region us-east-1



Step 6: Verification:-

aws ec2 describe-instances \
  --instance-ids i-xxxxxxxxxxxxxxx \
  --query 'Reservations[*].Instances[*].PublicIpAddress' \
  --output text \
  --region us-east-1

curl http://<public-ip>
